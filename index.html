<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Jsgame</title>
    <script src="scripts/phaser.min.js"></script>
  </head>
  <body>
    <script type="text/javascript">

      window.onload = function() {
        var game = new Phaser.Game(800, 600, Phaser.AUTO, '', { preload: preload, create: create, update: update });

        function preload() {
            game.load.image('earth', 'img/Dirt.png');
            game.load.image('player', 'img/player.png');

        }

        var land;
        var player;
        var currentSpeed = 0;
        var cursors;

        function create() {
          game.world.setBounds(-1000, -1000, 2000, 2000);

          //  Our tiled scrolling background
          land = game.add.tileSprite(0, 0, 800, 600, 'earth');
          land.fixedToCamera = true;

          player = game.add.sprite(0, 0, 'player');
          player.anchor.setTo(0.5, 0.5);

          game.physics.enable(player, Phaser.Physics.ARCADE);
          player.body.drag.set(0.2);
          player.body.maxVelocity.setTo(400, 400);
          player.body.collideWorldBounds = true;

          game.camera.follow(player);
          game.camera.deadzone = new Phaser.Rectangle(150, 150, 500, 300);
          game.camera.focusOnXY(0, 0);

          cursors = game.input.keyboard.createCursorKeys();
        }

        function update() {
          if (cursors.left.isDown)
          {
              player.angle -= 4;
          }
          else if (cursors.right.isDown)
          {
              player.angle += 4;
          }

          if (cursors.up.isDown)
          {
              //  The speed we'll travel at
              currentSpeed = 300;
          }
          else
          {
              if (currentSpeed > 0)
              {
                  currentSpeed -= 4;
              }
          }

           if (currentSpeed > 0)
          {
              game.physics.arcade.velocityFromRotation(player.rotation, currentSpeed, player.body.velocity);
          }

          land.tilePosition.x = -game.camera.x;
          land.tilePosition.y = -game.camera.y;


        }
      };

    </script>

  </body>
</html>
